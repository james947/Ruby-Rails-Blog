<% if flash[:errors] %>
  <% flash[:errors].each do |e| %>
    <p><%= e %></p>
  <% end %>
<% end %>
<%= content_for(:title, "Edit") %>
<div class="row">
  <form enctype="multipart/form-data" class="col s12 m8" action="/posts/<%= @post.id %>" method="post">
    <input type="hidden" name="_method" value="patch">
    <input type="hidden" name="authenticity_token" value="<%= form_authenticity_token %>">
      <div class="row">
        <div class="input-field">
          <label class="active" for="title">Title</label>
          <input type="text" class="validate" name="title" value="<%= @post.title %>">
          </div>
      </div>
      <div class="row">
        <div class="input-field">
          <label class="active" for="subtitle">Subtitle</label>
          <input type="text" class="validate" name="subtitle" value="<%= @post.subtitle %>">
        </div>
        </div>
      <div class="row">
        <div class="input-field">
          <label class="active" for="author">Author</label>
          <input type="text" class="validate" name="author" value="<%= @post.author%>">
        </div>
      </div>
      <div class="row">
        <div class="input-field">
        <label class="active" for="category">Category</label><br>
        <select id="inputState"  class="browser-default" name ="category_id">
          <% @categories.each do |opt_category| %>
              <% if @category.id == opt_category.id %>
                  <option value="<%= opt_category.id %>" selected="selected"><%= opt_category.name %></option>
              <% else %>
                  <option value="<%= opt_category.id %>"><%= opt_category.name %></option>
              <% end %>
          <% end %>
        </select>
        </div>
      </div>
      <div class="row">
        <div class="input-field">
          <label class="active" for="category">Content</label><br>
          <input id="body" type="hidden" value="<%= @post.content %>" name="content">
          <trix-editor  autofocus class="trix-content" input="body" data-intro="true"></trix-editor>
        </div>
      </div>
      <div>
        <label for="image">Upload:</label>
        <input type="file"
               id="image" name="image"
               accept="image/png, image/jpeg" />
      </div>
        <button type="submit" class="btn right">Update</button>
  </form>
</div>
